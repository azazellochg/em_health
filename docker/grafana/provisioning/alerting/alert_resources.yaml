apiVersion: 1

# see https://github.com/grafana/provisioning-alerting-examples/

muteTimes:
    - orgId: 1
      name: weekends
      time_intervals:
        - weekdays: [saturday, sunday]
    - orgId: 1
      name: weekdays_daytime
      time_intervals:
        - times:
            - start_time: "08:00"
              end_time: "24:00"
          weekdays: [ friday, thursday, wednesday, tuesday, monday ]
    - orgId: 1
      name: weekdays_nighttime
      time_intervals:
        - times:
            - start_time: "00:00"
              end_time: "08:00"
          weekdays: [ friday, thursday, wednesday, tuesday, monday ]

contactPoints:
    - orgId: 1
      name: grafana-default-email
      receivers:
        - uid: first_uid
          type: email
          disableResolveMessage: true
          settings:
            addresses: $GRAFANA_EMAIL_TO
            singleEmail: false
            message: my optional message to include
            subject: |
              {{ template "default.title" . }}

templates:
    - orgId: 1
      name: custom_email.message
      template: |
        {{ define "custom_email.message" }}
          Lorem ipsum - Custom alert!
        {{ end }}
    - orgId: 1
      name: custom_email.subject
      template: |
        {{ define "custom_email.subject" }}
        {{ len .Alerts.Firing }} firing alert(s), {{ len .Alerts.Resolved }} resolved alert(s)
        {{ end }}
